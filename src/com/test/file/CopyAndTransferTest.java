/**
 * 
 */
package com.test.file;

import java.io.BufferedReader;
import java.io.BufferedWriter;
import java.io.FileNotFoundException;
import java.io.FileOutputStream;
import java.io.FileReader;
import java.io.IOException;
import java.io.OutputStreamWriter;
import java.io.PrintWriter;
import java.util.regex.Matcher;
import java.util.regex.Pattern;

import org.json.JSONException;
import org.json.JSONObject;


/**
 * @author dell
 *
 */
public class CopyAndTransferTest {
	
    /** 
     * Unicode编码根式转化为汉字显示
     * 
     * @param str \u6728 
     * @return 'ľ' 26408 
     */  
public static String unicodeToString(String str) {  
  
    Pattern pattern = Pattern.compile("(\\\\u(\\p{XDigit}{4}))");  
    Matcher matcher = pattern.matcher(str);  
    char ch;  
    while (matcher.find()) {  
        //group 6728  
        String group = matcher.group(2);  
        //ch:'ľ' 26408  
        ch = (char) Integer.parseInt(group, 16);  
        //group1 \u6728  
        String group1 = matcher.group(1);  
        str = str.replace(group1, ch + "");  
    }  
    return str;  
}  

/**
 * 转化JSon中的content和title属性值为汉字
 * JSON格式如下：
 * {"url": "http://news.163.com/16/0321/03/BILDUDE300014AED.html", "content": "\uff08\u539f\u6807\u9898\uff1a\u5f15\u9886\u65b0\u5e38\u6001\u7684\u5927\u5e03\u5c40\uff08\u4e60\u8fd1\u5e73\u6cbb\u56fd\u7406\u653f\u5173\u952e\u8bcd\uff0819\uff09\uff09(\u56fe)\uff09\n\u56fe\u89e3\n2015\u5e7411\u6708\uff0c\u4e2d\u592e\u8d22\u7ecf\u9886\u5bfc\u5c0f\u7ec4\u4f1a\u8bae\u4e0a\uff0c\u4e60\u8fd1\u5e73\u63d0\u51fa\uff0c\u8981\u201c\u5728\u9002\u5ea6\u6269\u5927\u603b\u9700\u6c42\u7684\u540c\u65f6\uff0c\u7740\u529b\u52a0\u5f3a\u4f9b\u7ed9\u4fa7\u7ed3\u6784\u6027\u6539\u9769\u201d\uff1b\u5728G20\u5cf0\u4f1a\u3001APEC\u4f1a\u8bae\u4e0a\uff0c\u4e60\u8fd1\u5e73\u5219\u5c06\u201c\u91cd\u89c6\u4f9b\u7ed9\u7aef\u548c\u9700\u6c42\u7aef\u534f\u540c\u53d1\u529b\u201d\u4f5c\u4e3a\u4e16\u754c\u7ecf\u6d4e\u7684\u201c\u836f\u65b9\u201d\uff1b\u540c\u671f\u7684\u56fd\u52a1\u9662\u5e38\u52a1\u4f1a\u8bae\u540c\u6837\u5f3a\u8c03\uff0c\u8981\u201c\u57f9\u80b2\u5f62\u6210\u65b0\u4f9b\u7ed9\u65b0\u52a8\u529b\u6269\u5927\u5185\u9700\u201d\u3002\n\u4ece\u90a3\u65f6\u8d77\uff0c\u4f9b\u7ed9\u4fa7\u7ed3\u6784\u6027\u6539\u9769\u5f00\u59cb\u6210\u4e3a\u4e00\u4e2a\u9ad8\u9891\u8bcd\u3002\n\u636e\u4e0d\u5b8c\u5168\u7edf\u8ba1\uff0c\u4e60\u8fd1\u5e73\u81f3\u5c11\u5728\u5341\u4f59\u4e2a\u573a\u5408\u63d0\u5230\u8fc7\u4f9b\u7ed9\u4fa7\u7ed3\u6784\u6027\u6539\u9769\u3002\n\u5728\u4e2d\u592e\u7ecf\u6d4e\u5de5\u4f5c\u4f1a\u8bae\u3001\u7701\u90e8\u7ea7\u5e72\u90e8\u4e13\u9898\u7814\u8ba8\u73ed\u3001\u4e2d\u592e\u653f\u6cbb\u5c40\u4f1a\u8bae\u3001\u4e2d\u592e\u653f\u6cbb\u5c40\u96c6\u4f53\u5b66\u4e60\u3001\u653f\u5e9c\u5de5\u4f5c\u62a5\u544a\u3001\u9886\u5bfc\u4eba\u8c03\u7814\u8003\u5bdf\u7b49\u591a\u4e2a\u573a\u5408\uff0c\u8fd9\u4e2a\u8bcd\u4e5f\u9ad8\u9891\u51fa\u73b0\u3002\n\u90a3\u4e48\uff0c\u7a76\u7adf\u4ec0\u4e48\u662f\u4f9b\u7ed9\u4fa7\u7ed3\u6784\u6027\u6539\u9769\uff1f\n\u663e\u7136\uff0c\u4e0e\u201c\u4f9b\u7ed9\u4fa7\u201d\u5bf9\u5e94\u7684\u5c31\u662f\u201c\u9700\u6c42\u4fa7\u201d\u3002\u5728\u4f20\u7edf\u7684\u9700\u6c42\u7ba1\u7406\u601d\u8def\u4e2d\uff0c\u62c9\u52a8\u7ecf\u6d4e\u589e\u957f\u7684\u65b9\u5f0f\u4e3b\u8981\u662f\u52a0\u5927\u6295\u8d44\u3001\u523a\u6fc0\u6d88\u8d39\u548c\u62c9\u52a8\u51fa\u53e3\uff1b\u800c\u4ece\u4f9b\u7ed9\u4fa7\u6765\u770b\uff0c\u5219\u8ba4\u4e3a\u7ecf\u6d4e\u589e\u957f\u7684\u52a8\u529b\u5728\u4e8e\u5728\u4f9b\u7ed9\u548c\u751f\u4ea7\u7aef\u505a\u6587\u7ae0\uff0c\u901a\u8fc7\u89e3\u653e\u751f\u4ea7\u529b\u3001\u63d0\u5347\u4ea7\u4e1a\u7ade\u4e89\u529b\u6765\u201c\u63d0\u8d28\u589e\u6548\u201d\u3002\n\u4f9b\u7ed9\u4fa7\u7ed3\u6784\u6027\u6539\u9769\u5e76\u975e\u5e94\u6025\u4e4b\u4e3e\uff0c\u800c\u662f\u5e94\u5bf9\u6df1\u5c42\u7ed3\u6784\u6027\u77db\u76fe\u7684\u957f\u4e45\u836f\u65b9\u3002\u7528\u4e60\u8fd1\u5e73\u7684\u8bdd\u8bf4\uff0c\u63a8\u8fdb\u7ed3\u6784\u6027\u6539\u9769\u7279\u522b\u662f\u4f9b\u7ed9\u4fa7\u7ed3\u6784\u6027\u6539\u9769\uff0c\u662f\u201c\u5341\u4e09\u4e94\u201d\u7684\u4e00\u4e2a\u53d1\u5c55\u6218\u7565\u91cd\u70b9\u3002\n\u4f9b\u7ed9\u4fa7\u7ed3\u6784\u6027\u6539\u9769\uff0c\u5173\u952e\u8bcd\u6709\u4e24\u4e2a\uff1a\u4e00\u662f\u4f9b\u7ed9\u4fa7\uff0c\u4e8c\u662f\u7ed3\u6784\u6027\u3002\u4ece\u4f9b\u7ed9\u4fa7\u770b\uff0c\u4e2d\u56fd\u76ee\u524d\u7684\u4f9b\u7ed9\uff0c\u9762\u4e34\u7740\u4ea7\u80fd\u8fc7\u5269\u3001\u6548\u7387\u4f4e\u4e0b\u3001\u6863\u6b21\u4e0d\u9ad8\u3001\u7ade\u4e89\u529b\u4e0d\u5f3a\u7b49\u95ee\u9898\u3002\n3\u670813\u65e5\uff0c\u5546\u52a1\u90e8\u90e8\u957f\u9ad8\u864e\u57ce\u5728\u63a5\u53d7\u91c7\u8bbf\u65f6\u8868\u793a\uff0c\u968f\u7740\u4e2d\u56fd\u4e2d\u9ad8\u6536\u5165\u9636\u5c42\u7684\u5f62\u6210\uff0c\u4e2a\u6027\u5316\u3001\u54c1\u724c\u5316\u3001\u5dee\u5f02\u5316\u7684\u6d88\u8d39\u9700\u6c42\u8d8a\u6765\u8d8a\u5f3a\u70c8\u30022015\u5e74\uff0c\u4e2d\u56fd\u4eba\u5728\u5883\u5916\u6d88\u8d39\u5237\u5361\u8fbe\u5230900\u4ebf\u5143\uff0c\u8fd9\u4e9b\u6d88\u8d39\u5927\u591a\u82b1\u5728\u9ad8\u6863\u4ea7\u54c1\u3001\u533b\u7597\u3001\u6559\u80b2\u7b49\u65b9\u9762\u3002\n\u662f\u4e2d\u56fd\u751f\u4ea7\u4e0d\u51fa\u6765\u8fd9\u4e9b\u4ea7\u54c1\u5417\uff1f\u8fd9\u5176\u4e2d\u6709\u80fd\u529b\u95ee\u9898\uff0c\u4e5f\u6709\u601d\u8def\u539f\u56e0\u3002\u4f5c\u4e3a\u5236\u9020\u4e1a\u5927\u56fd\uff0c\u4e2d\u56fd\u5728\u4e00\u4e9b\u5f15\u9886\u4e16\u754c\u7684\u65b0\u5174\u4ea7\u4e1a\u3001\u5c16\u7aef\u79d1\u6280\u65b9\u9762\u6709\u6240\u6b20\u7f3a\uff1b\u5728\u601d\u8def\u65b9\u9762\uff0c\u4ee5\u5f80\u5927\u591a\u662f\u4e00\u7a9d\u8702\u5f0f\u7684\u6392\u6d6a\u5f0f\u53d1\u5c55\uff0c\u9020\u5c31\u4e86\u4eca\u5929\u5982\u7164\u70ad\u3001\u94a2\u94c1\u7b49\u9886\u57df\u7684\u4e25\u91cd\u8fc7\u5269\uff0c\u540c\u65f6\u751f\u4ea7\u8d44\u6e90\u548c\u4ea7\u54c1\u5206\u5e03\u4e0d\u5747\u8861\uff0c\u5728\u4e2d\u897f\u90e8\u3001\u519c\u6751\u53ca\u57fa\u7840\u516c\u76ca\u7b49\u9886\u57df\u5219\u5b58\u5728\u5de8\u5927\u6b20\u7f3a\u3002\n\u8fd9\u5c31\u662f\u5f53\u524d\u4e2d\u56fd\u7ecf\u6d4e\u5b58\u5728\u7684\u6700\u6df1\u5c42\u7684\u7ed3\u6784\u6027\u77db\u76fe\u3002\u8981\u89e3\u51b3\u8fd9\u79cd\u77db\u76fe\uff0c\u9700\u8981\u5728\u4f9b\u7ed9\u4fa7\u548c\u9700\u6c42\u4fa7\u540c\u65f6\u53d1\u529b\u3002\n\u4e60\u8fd1\u5e73\u6307\u51fa\uff0c\u4f9b\u7ed9\u4fa7\u7ed3\u6784\u6027\u6539\u9769\u7684\u6839\u672c\u76ee\u7684\u662f\u63d0\u9ad8\u793e\u4f1a\u751f\u4ea7\u529b\u6c34\u5e73\uff0c\u843d\u5b9e\u597d\u4ee5\u4eba\u6c11\u4e3a\u4e2d\u5fc3\u7684\u53d1\u5c55\u601d\u60f3\u3002\u8981\u5728\u9002\u5ea6\u6269\u5927\u603b\u9700\u6c42\u7684\u540c\u65f6\uff0c\u53bb\u4ea7\u80fd\u3001\u53bb\u5e93\u5b58\u3001\u53bb\u6760\u6746\u3001\u964d\u6210\u672c\u3001\u8865\u77ed\u677f\uff0c\u4ece\u751f\u4ea7\u9886\u57df\u52a0\u5f3a\u4f18\u8d28\u4f9b\u7ed9\uff0c\u51cf\u5c11\u65e0\u6548\u4f9b\u7ed9\uff0c\u6269\u5927\u6709\u6548\u4f9b\u7ed9\uff0c\u63d0\u9ad8\u4f9b\u7ed9\u7ed3\u6784\u9002\u5e94\u6027\u548c\u7075\u6d3b\u6027\uff0c\u63d0\u9ad8\u5168\u8981\u7d20\u751f\u4ea7\u7387\uff0c\u4f7f\u4f9b\u7ed9\u4f53\u7cfb\u66f4\u597d\u9002\u5e94\u9700\u6c42\u7ed3\u6784\u53d8\u5316\u3002\n\u4e2d\u592e\u7ecf\u6d4e\u5de5\u4f5c\u4f1a\u8bae\u6307\u51fa\uff0c2016\u5e74\uff0c\u4f9b\u7ed9\u4fa7\u7ed3\u6784\u6027\u6539\u9769\u8981\u5728\u4e94\u4e2a\u5c42\u9762\u505a\u6587\u7ae0\uff1a\u53bb\u4ea7\u80fd\u3001\u53bb\u5e93\u5b58\u3001\u53bb\u6760\u6746\u3001\u964d\u6210\u672c\u3001\u8865\u77ed\u677f\u3002\n3\u67088\u65e5\uff0c\u5728\u53c2\u52a0\u5341\u4e8c\u5c4a\u5168\u56fd\u4eba\u5927\u56db\u6b21\u4f1a\u8bae\u6e56\u5357\u4ee3\u8868\u56e2\u5ba1\u8bae\u65f6\uff0c\u4e60\u8fd1\u5e73\u6307\u51fa\uff0c\u63a8\u8fdb\u4f9b\u7ed9\u4fa7\u7ed3\u6784\u6027\u6539\u9769\uff0c\u662f\u4e00\u573a\u786c\u4ed7\u3002\u8981\u628a\u63e1\u597d\u201c\u52a0\u6cd5\u201d\u548c\u201c\u51cf\u6cd5\u201d\u3001\u5f53\u524d\u548c\u957f\u8fdc\u3001\u529b\u5ea6\u548c\u8282\u594f\u3001\u4e3b\u8981\u77db\u76fe\u548c\u6b21\u8981\u77db\u76fe\u3001\u653f\u5e9c\u548c\u5e02\u573a\u7684\u5173\u7cfb\u3002\n\n\n\u5177\u4f53\u600e\u4e48\u505a\uff1f\u4e2d\u592e\u7ecf\u6d4e\u5de5\u4f5c\u4f1a\u8bae\u4e0a\uff0c\u4e60\u8fd1\u5e73\u6307\u51fa\uff0c\u8981\u5728\u9002\u5ea6\u6269\u5927\u603b\u9700\u6c42\u7684\u540c\u65f6\uff0c\u7740\u529b\u52a0\u5f3a\u4f9b\u7ed9\u4fa7\u7ed3\u6784\u6027\u6539\u9769\uff0c\u5b9e\u65bd\u76f8\u4e92\u914d\u5408\u7684\u4e94\u5927\u653f\u7b56\u652f\u67f1\uff1a\u5b8f\u89c2\u653f\u7b56\u8981\u7a33\uff0c\u5c31\u662f\u8981\u4e3a\u7ed3\u6784\u6027\u6539\u9769\u8425\u9020\u7a33\u5b9a\u7684\u5b8f\u89c2\u7ecf\u6d4e\u73af\u5883\uff1b\u4ea7\u4e1a\u653f\u7b56\u8981\u51c6\uff0c\u5c31\u662f\u8981\u51c6\u786e\u5b9a\u4f4d\u7ed3\u6784\u6027\u6539\u9769\u65b9\u5411\uff1b\u5fae\u89c2\u653f\u7b56\u8981\u6d3b\uff0c\u5c31\u662f\u8981\u5b8c\u5584\u5e02\u573a\u73af\u5883\u3001\u6fc0\u53d1\u4f01\u4e1a\u6d3b\u529b\u548c\u6d88\u8d39\u8005\u6f5c\u529b\uff1b\u6539\u9769\u653f\u7b56\u8981\u5b9e\uff0c\u5c31\u662f\u8981\u52a0\u5927\u529b\u5ea6\u63a8\u52a8\u6539\u9769\u843d\u5730\uff1b\u793e\u4f1a\u653f\u7b56\u8981\u6258\u5e95\uff0c\u5c31\u662f\u8981\u5b88\u4f4f\u6c11\u751f\u5e95\u7ebf\u3002\n\u4eca\u5e741\u6708\uff0c\u5728\u91cd\u5e86\u8c03\u7814\u65f6\uff0c\u4e60\u8fd1\u5e73\u8bf4\uff0c\u8981\u52a0\u5927\u4f9b\u7ed9\u4fa7\u7ed3\u6784\u6027\u6539\u9769\u529b\u5ea6\uff0c\u91cd\u70b9\u662f\u4fc3\u8fdb\u4ea7\u80fd\u8fc7\u5269\u6709\u6548\u5316\u89e3\uff0c\u4fc3\u8fdb\u4ea7\u4e1a\u4f18\u5316\u91cd\u7ec4\uff0c\u964d\u4f4e\u4f01\u4e1a\u6210\u672c\uff0c\u53d1\u5c55\u6218\u7565\u6027\u65b0\u5174\u4ea7\u4e1a\u548c\u73b0\u4ee3\u670d\u52a1\u4e1a\uff0c\u589e\u52a0\u516c\u5171\u4ea7\u54c1\u548c\u670d\u52a1\u4f9b\u7ed9\uff0c\u7740\u529b\u63d0\u9ad8\u4f9b\u7ed9\u4f53\u7cfb\u8d28\u91cf\u548c\u6548\u76ca\uff0c\u66f4\u597d\u6ee1\u8db3\u4eba\u6c11\u9700\u8981\uff0c\u63a8\u52a8\u6211\u56fd\u793e\u4f1a\u751f\u4ea7\u529b\u6c34\u5e73\u5b9e\u73b0\u6574\u4f53\u8dc3\u5347\uff0c\u589e\u5f3a\u7ecf\u6d4e\u6301\u7eed\u589e\u957f\u52a8\u529b\u3002\n", "time": 1458503700, "title": "\u4e60\u8fd1\u5e73\u6cbb\u56fd\u7406\u653f\u5173\u952e\u8bcd\uff1a\u4f9b\u7ed9\u4fa7\u7ed3\u6784\u6027\u6539\u9769"}
 * @param jsonStr
 * @return
 */
public static String transferUnicode2Chinese(String jsonStr){
	 try {
		JSONObject json = new JSONObject(jsonStr);
		json.put("content", unicodeToString(json.getString("content")));
		json.put("title", unicodeToString(json.getString("title")));
		return json.toString();
	} catch (JSONException e) {
		e.printStackTrace();
	} 
	return "";
}


public static String makeHtmlPageHeader(){
	StringBuilder builder = new StringBuilder();
	builder.append("<!DOCTYPE html>");
	builder.append("<html>");
	builder.append("<head>");
	builder.append("<meta http-equiv='Content-Type' content='text/html; charset=UTF-8' />");
	builder.append("<title>新闻聚合搜索引擎</title>");
	builder.append(" <link href=\"http://libs.baidu.com/bootstrap/3.0.3/css/bootstrap.min.css\" rel=\"stylesheet\">");
	builder.append(" <script src=\"http://libs.baidu.com/jquery/2.0.0/jquery.min.js\"></script>");
	builder.append(" <script src=\"http://libs.baidu.com/bootstrap/3.0.3/js/bootstrap.min.js\"></script>");
	builder.append("</head>");
	builder.append("<body>");
	builder.append("<!--<div style=\"padding: 100px 100px 8px;margin-top:10px\"> -->");
	builder.append("<div class=\"col-lg-8 col-lg-offset-2\">");
	return builder.toString();
}

public static String makeHtmlPageBody(String time,String title,String content,String url){
	StringBuilder builder = new StringBuilder();
	builder.append("<br><br>");
	builder.append("<div class=\"panel panel-info\">");
	builder.append("<div class=\"panel-heading\">");
	builder.append("时间:"+time+"***** 标题："+ title);
	builder.append(	"</div>");
	builder.append("</div>");
	builder.append(" <div class=\"panel-body\">");
	builder.append(content);
	builder.append("<br><br>");
	builder.append("原始网页链接:<a href='"+url+"'>"+url+"</a>");
	builder.append("</div>");
	return builder.toString();
}

public static String makeHtmlPageTail(){
	StringBuilder builder = new StringBuilder();
	builder.append("</div>");
	builder.append("	</body>");
	builder.append("	</html>");
	return builder.toString();
}

	/**
	 * @param args
	 */
	public static void main(String[] args) {
		// TODO Auto-generated method stub
		 try {
			              BufferedReader br = new BufferedReader(new FileReader("C:\\Users\\dell\\Desktop\\newsdatas\\data\\news.json"));
			  
			              PrintWriter out = new PrintWriter(new BufferedWriter(
			                      new OutputStreamWriter(new FileOutputStream("C:\\Users\\dell\\Desktop\\newsdatas\\data\\look_news.json"), "UTF-8")));
			              PrintWriter outHtml = new PrintWriter(new BufferedWriter(
			                      new OutputStreamWriter(new FileOutputStream("C:\\Users\\dell\\Desktop\\newsdatas\\data\\look_news.html"), "UTF-8")));
			  
			              String line = null;
			              outHtml.println(makeHtmlPageHeader()); 
			              while ((line = br.readLine()) != null) {
			            		 try {
			            				JSONObject json = new JSONObject(line);
			            				String content = unicodeToString(json.getString("content"));
			            				String title = unicodeToString(json.getString("title"));
			            				String url = json.getString("url");
			            				String time = json.getString("time");
			            				outHtml.println(makeHtmlPageBody( time, title, content, url)); 	
			            			} catch (JSONException e) {
			            				e.printStackTrace();
			            			} 
			            		 line = transferUnicode2Chinese(line);
			                 out.println(line);      
			              }
			              outHtml.println(makeHtmlPageTail()); 
			              if (br != null) {
			                  br.close();
			              }
			              if (out != null) {
			                  out.close();
			              }
			              if (outHtml != null) {
			            	  outHtml.close();
			              }
			  
			          } catch (FileNotFoundException e) {
			              e.printStackTrace();
			          } catch (IOException e) {
			             e.printStackTrace();
			          }
			
	}

}
